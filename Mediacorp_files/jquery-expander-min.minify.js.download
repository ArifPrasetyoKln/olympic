/*!
 * jQuery Expander Plugin - v1.7.0 - 2016-03-12
 * http://plugins.learningjquery.com/expander/
 * Copyright (c) 2016 Karl Swedberg
 * Licensed MIT (http://www.opensource.org/licenses/mit-license.php)
 */
!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof module&&"object"==typeof module.exports?module.exports=b:b(jQuery)}(function(b){b.expander={version:"1.7.0",defaults:{slicePoint:100,sliceOn:null,preserveWords:!0,normalizeWhitespace:!0,showWordCount:!1,detailPrefix:" ",wordCountText:" ({{count}} words)",widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,wordEnd:/(&(?:[^;]+;)?|[0-9a-zA-Z\u00C0-\u0100]+|[^\u0000-\u007F]+)$/,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",moreLinkClass:"more-link",lessLinkClass:"less-link",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}},b.fn.expander=function(N){function M(h,g){var l="span",k=h.summary,j=y.exec(k),i=j?j[2].toLowerCase():"";return g?(l="div",j&&"a"!==i&&!h.expandAfterSummary?k=k.replace(y,h.moreLabel+"$1"):k+=h.moreLabel,k='<div class="'+h.summaryClass+'">'+k+"</div>"):k+=h.moreLabel,[k,h.detailPrefix||"","<",l+' class="'+h.detailClass+'"',">",h.details,"</"+l+">"].join("")}function L(e,d){var f='<span class="'+e.moreClass+'">'+e.expandPrefix;return e.showWordCount?e.wordCountText=e.wordCountText.replace(/\{\{count\}\}/,d.replace(B,"").replace(/\&(?:amp|nbsp);/g,"").replace(/(?:^\s+|\s+$)/,"").match(/\w+/g).length):e.wordCountText="",f+='<a href="#" class="'+e.moreLinkClass+'">'+e.expandText+e.wordCountText+"</a></span>"}function K(d,e){return d.lastIndexOf("<")>d.lastIndexOf(">")&&(d=d.slice(0,d.lastIndexOf("<"))),e&&(d=d.replace(C,"")),b.trim(d)}function J(d,c){c.stop(!0,!0)[d.collapseEffect](d.collapseSpeed,function(){var e=c.prev("span."+d.moreClass).show();e.length||c.parent().children("div."+d.summaryClass).show().find("span."+d.moreClass).show(),d.afterCollapse&&d.afterCollapse.call(c)})}function I(e,g,f){e.collapseTimer&&(F=setTimeout(function(){J(e,g),b.isFunction(e.onCollapse)&&e.onCollapse.call(f,!1)},e.collapseTimer))}function H(g){var k="ExpandMoreHere374216623",j=g.summaryText.replace(g.sliceOn,k);j=b("<div>"+j+"</div>").text();var i=j.indexOf(k),h=g.summaryText.indexOf(g.sliceOn);return -1!==i&&i<g.slicePoint&&(g.summaryText=g.allHtml.slice(0,h)),g}var G="init";"string"==typeof N&&(G=N,N={});var F,E=b.extend({},b.expander.defaults,N),D=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,C=E.wordEnd,B=/<\/?(\w+)[^>]*>/g,A=/<(\w+)[^>]*>/g,z=/<\/(\w+)>/g,y=/(<\/([^>]+)>)\s*$/,x=/^(<[^>]+>)+.?/,w=/\s\s+/g,v=function(c){return E.normalizeWhitespace?b.trim(c||"").replace(w," "):c},a={init:function(){this.each(function(){var am,al,ak,ai,ae,ac,aa,Y,W,t,p,aj,ah,ag,af,ad=[],ab=[],Z="",X={},V=this,r=b(this),o=b([]),n=b.extend({},E,r.data("expander")||b.meta&&r.data()||{}),l=!!r.find("."+n.detailClass).length,k=!!r.find("*").filter(function(){var i=b(this).css("display");return/^block|table|list/.test(i)}).length,j=k?"div":"span",h=j+"."+n.detailClass,g=n.moreClass+"",f=n.lessClass+"",e=n.expandSpeed||0,d=v(r.html()),c=d.slice(0,n.slicePoint);if(n.moreSelector="span."+g.split(" ").join("."),n.lessSelector="span."+f.split(" ").join("."),!b.data(this,"expanderInit")){for(b.data(this,"expanderInit",!0),b.data(this,"expander",n),b.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(i,m){X[m]=b.isFunction(n[m])}),c=K(c),ae=c.replace(B,"").length;ae<n.slicePoint;){ai=d.charAt(c.length),"<"===ai&&(ai=d.slice(c.length).match(x)[0]),c+=ai,ae++}for(n.sliceOn&&(af=H({sliceOn:n.sliceOn,slicePoint:n.slicePoint,allHtml:d,summaryText:c}),c=af.summaryText),c=K(c,n.preserveWords&&d.slice(c.length).length),ac=c.match(A)||[],aa=c.match(z)||[],ak=[],b.each(ac,function(m,i){D.test(i)||ak.push(i)}),ac=ak,al=aa.length,am=0;al>am;am++){aa[am]=aa[am].replace(z,"$1")}if(b.each(ac,function(i,s){var q=s.replace(A,"$1"),m=b.inArray(q,aa);-1===m?(ad.push(s),ab.push("</"+q+">")):aa.splice(m,1)}),ab.reverse(),l){W=r.find(h).remove().html(),c=r.html(),d=c+W,Y=""}else{if(W=d.slice(c.length),t=b.trim(W.replace(B,"")),""===t||t.split(/\s+/).length<n.widow){return}Y=ab.pop()||"",c+=ab.join(""),W=ad.join("")+W}n.moreLabel=r.find(n.moreSelector).length?"":L(n,W),k?W=d:"&"===c.charAt(c.length-1)&&(Z=/^[#\w\d\\]+;/.exec(W),Z&&(W=W.slice(Z[0].length),c+=Z[0])),c+=Y,n.summary=c,n.details=W,n.lastCloseTag=Y,X.onSlice&&(ak=n.onSlice.call(V,n),n=ak&&ak.details?ak:n),p=M(n,k),r.empty().append(p),ah=r.find(h),ag=r.find(n.moreSelector),"slideUp"===n.collapseEffect&&"slideDown"!==n.expandEffect||r.is(":hidden")?ah.css({display:"none"}):ah[n.collapseEffect](0),o=r.find("div."+n.summaryClass),aj=function(m){m.preventDefault();var i=m.startExpanded?0:e;ag.hide(),o.hide(),X.beforeExpand&&n.beforeExpand.call(V),ah.stop(!1,!0)[n.expandEffect](i,function(){ah.css({zoom:""}),X.afterExpand&&n.afterExpand.call(V),I(n,ah,V)})},ag.find("a").unbind("click.expander").bind("click.expander",aj),n.userCollapse&&!r.find(n.lessSelector).length&&r.find(h).append('<span class="'+n.lessClass+'">'+n.userCollapsePrefix+'<a href="#" class="'+n.lessLinkClass+'">'+n.userCollapseText+"</a></span>"),r.find(n.lessSelector+" a").unbind("click.expander").bind("click.expander",function(i){i.preventDefault(),clearTimeout(F);var m=b(this).closest(h);J(n,m),X.onCollapse&&n.onCollapse.call(V,!0)}),n.startExpanded&&aj({preventDefault:function(){},startExpanded:!0})}})},destroy:function(){this.each(function(){var e,g,f=b(this);f.data("expanderInit")&&(e=b.extend({},f.data("expander")||{},E),g=f.find("."+e.detailClass).contents(),f.removeData("expanderInit"),f.removeData("expander"),f.find(e.moreSelector).remove(),f.find("."+e.summaryClass).remove(),f.find("."+e.detailClass).after(g).remove(),f.find(e.lessSelector).remove())})}};return a[G]&&a[G].call(this),this},b.fn.expander.defaults=b.expander.defaults});