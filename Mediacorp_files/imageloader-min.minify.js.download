/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(b,a){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",a):"object"==typeof module&&module.exports?module.exports=a():b.EvEmitter=a()}("undefined"!=typeof window?window:this,function(){function b(){}var a=b.prototype;return a.on=function(f,d){if(f&&d){var c=this._events=this._events||{},g=c[f]=c[f]||[];return g.indexOf(d)==-1&&g.push(d),this}},a.once=function(f,d){if(f&&d){this.on(f,d);var c=this._onceEvents=this._onceEvents||{},g=c[f]=c[f]||{};return g[d]=!0,this}},a.off=function(f,d){var c=this._events&&this._events[f];if(c&&c.length){var g=c.indexOf(d);return g!=-1&&c.splice(g,1),this}},a.emitEvent=function(h,d){var c=this._events&&this._events[h];if(c&&c.length){c=c.slice(0),d=d||[];for(var k=this._onceEvents&&this._onceEvents[h],j=0;j<c.length;j++){var g=c[j],f=k&&k[g];f&&(this.off(h,g),delete k[g]),g.apply(this,d)}return this}},a.allOff=function(){delete this._events,delete this._onceEvents},b}),function(b,a){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(c){return a(b,c)}):"object"==typeof module&&module.exports?module.exports=a(b,require("ev-emitter")):b.imagesLoaded=a(b,b.EvEmitter)}("undefined"!=typeof window?window:this,function(k,q){function g(h,d){for(var a in d){h[a]=d[a]}return h}function f(d){if(Array.isArray(d)){return d}var a="object"==typeof d&&"number"==typeof d.length;return a?l.call(d):[d]}function c(i,a,h){if(!(this instanceof c)){return new c(i,a,h)}var d=i;return"string"==typeof i&&(d=document.querySelectorAll(i)),d?(this.elements=f(d),this.options=g({},this.options),"function"==typeof a?h=a:g(this.options,a),h&&this.on("always",h),this.getImages(),j&&(this.jqDeferred=new j.Deferred),void setTimeout(this.check.bind(this))):void m.error("Bad element for imagesLoaded "+(d||i))}function b(a){this.img=a}function v(d,a){this.url=d,this.element=a,this.img=new Image}var j=k.jQuery,m=k.console,l=Array.prototype.slice;c.prototype=Object.create(q.prototype),c.prototype.options={},c.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},c.prototype.addElementImages=function(w){"IMG"==w.nodeName&&this.addImage(w),this.options.background===!0&&this.addElementBackgroundImages(w);var d=w.nodeType;if(d&&p[d]){for(var a=w.querySelectorAll("img"),y=0;y<a.length;y++){var x=a[y];this.addImage(x)}if("string"==typeof this.options.background){var u=w.querySelectorAll(this.options.background);for(y=0;y<u.length;y++){var h=u[y];this.addElementBackgroundImages(h)}}}};var p={1:!0,9:!0,11:!0};return c.prototype.addElementBackgroundImages=function(h){var d=getComputedStyle(h);if(d){for(var a=/url\((['"])?(.*?)\1\)/gi,s=a.exec(d.backgroundImage);null!==s;){var r=s&&s[2];r&&this.addBackground(r,h),s=a.exec(d.backgroundImage)}}},c.prototype.addImage=function(d){var a=new b(d);this.images.push(a)},c.prototype.addBackground=function(h,d){var a=new v(h,d);this.images.push(a)},c.prototype.check=function(){function d(o,h,r){setTimeout(function(){a.progress(o,h,r)})}var a=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",d),e.check()}):void this.complete()},c.prototype.progress=function(h,d,a){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!h.isLoaded,this.emitEvent("progress",[this,h,d]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,h),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&m&&m.log("progress: "+a,h,d)},c.prototype.complete=function(){var d=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(d,[this]),this.emitEvent("always",[this]),this.jqDeferred){var a=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[a](this)}},b.prototype=Object.create(q.prototype),b.prototype.check=function(){var a=this.getIsImageComplete();return a?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void (this.proxyImage.src=this.img.src))},b.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},b.prototype.confirm=function(d,a){this.isLoaded=d,this.emitEvent("progress",[this,this.img,a])},b.prototype.handleEvent=function(d){var a="on"+d.type;this[a]&&this[a](d)},b.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},b.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},b.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},v.prototype=Object.create(b.prototype),v.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var a=this.getIsImageComplete();a&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},v.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},v.prototype.confirm=function(d,a){this.isLoaded=d,this.emitEvent("progress",[this,this.element,a])},c.makeJQueryPlugin=function(a){a=a||k.jQuery,a&&(j=a,j.fn.imagesLoaded=function(n,h){var d=new c(this,n,h);return d.jqDeferred.promise(j(this))})},c.makeJQueryPlugin(),c});